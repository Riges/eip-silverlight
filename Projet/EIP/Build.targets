<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="All">  <Import Project="C:\Program Files\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />  <Import Project="C:\Program Files\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.TASKS" />   <!--  <UsingTask TaskName="MSBuild.Community.Tasks.RoboCopy" AssemblyFile = "C:\Program Files\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.dll" />-->  <PropertyGroup>    <Configuration Condition="'$(Configuration)' == ''">Release</Configuration>    <DeploymentType Condition="'$(DeploymentType)' == ''">prod</DeploymentType>    <Robocopy>C:\robocopy</Robocopy>  </PropertyGroup>  <Choose>    <When Condition=" '$(DeploymentType)'=='prod' ">      <PropertyGroup>        <DeploymentPath>C:\www\EIP</DeploymentPath>        <WebSite>EIP</WebSite>        <AppPool>EIP</AppPool>              </PropertyGroup>    </When>        <Otherwise>      <PropertyGroup>      </PropertyGroup>    </Otherwise>  </Choose>  <Target Name="All">    <!--<CallTarget Targets="Build;Deploy"/>-->    <CallTarget Targets="Build"/>  </Target>  <!--<Target Name="Build">    <Message Text="************* BUILD TARGET *************"/>    <CallTarget Targets="BuildManage;BuildSmartAdASPLibrary"/>  </Target>-->  <Target Name="Build">    <!-- Build manage -->    <MSBuild Projects="$(MSBuildProjectDirectory)\EIP.sln" Properties="Configuration=$(Configuration)" /> <!--Targets="ReBuild"-->  </Target>  <Target Name="Deploy">    <Message Text="*********************************************************"/>    <Message Text="****************** Deploy TARGET ******************"/>    <!-- Deployment of Manage -->    <CallTarget Targets="DeployProd"></CallTarget>      </Target>  <Target Name="DeployProd">    <Message Text="*********************************************************"/>    <Message Text="****************** DeployProd Target ******************"/>    <!-- Put the website off by Adding app_offline.htm file -->    <!--<Copy SourceFiles="$(MSBuildProjectDirectory)\Admin\app_offline.htm.off" DestinationFiles="$(DeploymentPath)\Admin\app_offline.htm"/>-->    <Message Text="*** Deploy the files with Robocopy (miror mode) ***"/>  <Message Text="****************** DeployProd Web : $(MSBuildProjectDirectory)\EIP.Web ******************"/>    <!-- Robocopty Web -->    <MSBuild.Community.Tasks.RoboCopy      Toolpath="$(Robocopy)"      SourceFolder="$(MSBuildProjectDirectory)\EIP.Web"      DestinationFolder="$(DeploymentPath)"      Mirror="true"      Subdirectories="true"      ExcludeFolders=".svn"	  /> <Message Text="****************** DeployProd WCF ******************"/>    <MSBuild.Community.Tasks.RoboCopy    Toolpath="$(Robocopy)"    SourceFolder="$(MSBuildProjectDirectory)\EIPWCF"    DestinationFolder="$(DeploymentPath)\WCF"    Mirror="true"    Subdirectories="false"    SourceFiles="ServiceEIP.svc;ClientAccessPolicy.xml;crossdomain.xml"    ExcludeFolders="*"	  />	  	  <Message Text="****************** DeployProd Web.config ******************"/>	<Copy       SourceFiles="$(MSBuildProjectDirectory)\EIPWCF\Web.prod.config"    DestinationFiles="$(DeploymentPath)\WCF\Web.config"    />	  <Message Text="****************** DeployProd Bin ******************"/>    <MSBuild.Community.Tasks.RoboCopy      Toolpath="$(Robocopy)"      SourceFolder="$(MSBuildProjectDirectory)\EIPWCF\Bin"      DestinationFolder="$(DeploymentPath)\WCF\bin"      Mirror="true"      Subdirectories="true"      ExcludeFolders=".svn"	  /><!--     <Robocopy      Toolpath="$(Robocopy)"      SourceFolder="$(MSBuildProjectDirectory)\EIPWCF\"      DestinationFolder="$(DeploymentPath)\WCF\App_Code"      Mirror="true"      Subdirectories="false"      ExcludeFolders="*"      ExcludeFiles="ServiceEIP.svc;Web.config;eip.snk;EIPWCF.csproj;EIPWCF.csproj.user;Web.Debug.config;Web.Release.config"	  />-->    <!-- Deploy the ads web.config file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\web.config.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\web.config"/>    --><!-- Deploy param_ads.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\param_ads.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\param_ads.asp"/>    --><!-- Deploy connadgestion.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadgestion.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadgestion.asp"/>    --><!-- Deploy connadstatistiques.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadstatistiques.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadstatistiques.asp"/>    --><!-- Deploy the connadstats.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadstats.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadstats.asp"/>    --><!-- Deploy the domain_select.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\domain_select.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\domain_select.asp"/>    --><!-- Deploy the connadposttest.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadposttest.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadposttest.asp"/>    --><!-- Deploy the connQuickReplication.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connQuickReplication.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connQuickReplication.asp"/>    --><!-- Robocopty ads\backoffice --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\backoffice"        DestinationFolder="$(DeploymentPath)\ads\backoffice"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\clic --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\clic"        DestinationFolder="$(DeploymentPath)\ads\clic"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\gestion --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\gestion"        DestinationFolder="$(DeploymentPath)\ads\gestion"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"        ExcludeFiles="login_internal.asp;login_internal_old.asp"	  />    --><!-- Robocopty ads\images --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\images"        DestinationFolder="$(DeploymentPath)\ads\images"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\libjs --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\libjs"        DestinationFolder="$(DeploymentPath)\ads\libjs"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\posttest --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\posttest"        DestinationFolder="$(DeploymentPath)\ads\posttest"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty PrecompiledWeb\Admin --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\PrecompiledWeb\Admin"        DestinationFolder="$(DeploymentPath)\Admin"        Mirror="true"        Subdirectories="true"        ExcludeFiles="app_offline.htm"        ExcludeFolders=".svn"	  />    --><!-- Deploy the Admin web.config file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\PrecompiledWeb\Admin\web.config.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\Admin\web.config"/>    -->    <!-- Put the website on by removing app_offline.htm file -->    <!--<Delete Files="$(DeploymentPath)\Admin\app_offline.htm"/>-->  </Target>  <!--<Target Name="DeployDiffusion">    <Message Text="*********************************************************"/>    <Message Text="******************* DeployDiffusion Target *******************"/>    --><!-- Robocopty ads --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads"        DestinationFolder="$(DeploymentPath)\ads"        Mirror="true"        Subdirectories="false"        SourceFiles="shim.gif;global.asa;global.asa.equinix;global.asa.telecity;web.config"        ExcludeFolders="*"	  />    --><!-- Deploy the demo version of the web.config file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\web.config.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\web.config"/>    --><!-- Robocopty ads\ascripts --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\ascripts"        DestinationFolder="$(DeploymentPath)\ads\ascripts"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Deploy the version of the param_ads.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\param_ads.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\param_ads.asp"/>    --><!-- Deploy the version of the connadgestion.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadgestion.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadgestion.asp"/>    --><!-- Deploy the version of the connadstatistiques.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadstatistiques.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadstatistiques.asp"/>    --><!-- Deploy the version of the connadstats.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadstats.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadstats.asp"/>    --><!-- Deploy the version of the domain_select.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\domain_select.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\domain_select.asp"/>    --><!-- Deploy the version of the connadposttest.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connadposttest.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connadposttest.asp"/>    --><!-- Deploy the version of the connQuickReplication.asp file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\ads\ascripts\connQuickReplication.asp.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\ads\ascripts\connQuickReplication.asp"/>    --><!-- Robocopty ads\aspnet_client --><!--    --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\aspnet_client"        DestinationFolder="$(DeploymentPath)\ads\aspnet_client"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"        	  />--><!--    --><!-- Robocopty ads\backoffice --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\backoffice"        DestinationFolder="$(DeploymentPath)\ads\backoffice"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Create empty directory call --><!--    <MakeDir Directories="$(DeploymentPath)\ads\call"></MakeDir>    --><!-- Robocopty ads\clic --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\clic"        DestinationFolder="$(DeploymentPath)\ads\clic"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\def --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\def"        DestinationFolder="$(DeploymentPath)\ads\def"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\diff --><!--    --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\diff"        DestinationFolder="$(DeploymentPath)\ads\diff"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"        	  />--><!--    --><!-- Robocopty ads\iframeout --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\iframeout"        DestinationFolder="$(DeploymentPath)\ads\iframeout"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\imp --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\imp"        DestinationFolder="$(DeploymentPath)\ads\imp"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\smart (site institutionnel) --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\smart"        DestinationFolder="$(DeploymentPath)\ads\smart"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\smartadserver --><!--    --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\smartadserver"        DestinationFolder="$(DeploymentPath)\ads\smartadserver"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"        	  />--><!--    --><!-- Robocopty ads\temp --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\temp"        DestinationFolder="$(DeploymentPath)\ads\temp"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Create empty directory tracer --><!--    <MakeDir Directories="$(DeploymentPath)\ads\tracer"></MakeDir>    --><!-- Robocopty ads\track --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\track"        DestinationFolder="$(DeploymentPath)\ads\track"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\video --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\video"        DestinationFolder="$(DeploymentPath)\ads\video"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty Diffx --><!--    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\PrecompiledWeb\Diffx"        DestinationFolder="$(DeploymentPath)\Diffx"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Deploy the Diffx web.config file --><!--    <Copy SourceFiles="$(MSBuildProjectDirectory)\PrecompiledWeb\Diffx\web.config.$(DeploymentType)" DestinationFiles="$(DeploymentPath)\Diffx\web.config"/>  </Target>-->  <!--<Target Name="DeployImages">    --><!-- Robocopty ads\gestion\images on V32 --><!--    <Robocopy    Toolpath="$(Robocopy)"    SourceFolder="$(MSBuildProjectDirectory)\ads\gestion\images"    DestinationFolder="\\10.2.7.54\C$\smart\V32\ads\gestion\images"    Mirror="true"    Subdirectories="true"    ExcludeFolders=".svn"	  />    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\gestion\images"        DestinationFolder="\\10.2.7.55\C$\smart\V32\ads\gestion\images"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />    --><!-- Robocopty ads\gestion\images on V33 --><!--    <Robocopy    Toolpath="$(Robocopy)"    SourceFolder="$(MSBuildProjectDirectory)\ads\gestion\images"    DestinationFolder="\\10.2.7.54\C$\smart\V33\ads\gestion\images"    Mirror="true"    Subdirectories="true"    ExcludeFolders=".svn"	  />    <Robocopy        Toolpath="$(Robocopy)"        SourceFolder="$(MSBuildProjectDirectory)\ads\gestion\images"        DestinationFolder="\\10.2.7.55\C$\smart\V33\ads\gestion\images"        Mirror="true"        Subdirectories="true"        ExcludeFolders=".svn"	  />  </Target>-->  <!--<Target Name="DeploySmartResX">    -->  <!-- Publish SmartResX -->  <!--    <Message Text="*********************************************************"/>    <Message Text="****************** DeploySmartResX Target ******************"/>    <MSBuild Projects="$(MSBuildProjectDirectory)\SmartResX\SmartResX.sln" Targets="Publish" Properties="UpdateUrl=http://demo.smartadserver.com/SmartResX/;PublishDir=$(DeploymentPath)\SmartResX\"/>  </Target>--></Project>